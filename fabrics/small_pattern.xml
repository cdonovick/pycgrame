<cgra>
	<module name="block1">
		<input name="in0"/> <input name="in1"/> <input name="in2"/> <input name="in3"/>
		<output name="out"/>
		<inst name="func" module="FuncUnit" op="add sub mul div and or xor shl shr load store const"/>
		<inst name="register" module="Register"/>
		<wire name="in_a"/> <wire name="in_b"/> <wire name="func_out"/>
		<connection select-from="this.in0 this.in1 this.in2 this.in3 register.out" to="in_a in_b"/>
		<connection from="in_a" to="func.in_a"/>
		<connection from="in_b" to="func.in_b"/>
		<connection select-from="in_a in_b func.out" to="func_out"/>
		<connection from="func_out" to="register.in"/>
		<connection select-from="func_out register.out" to="this.out"/>
	</module>
	<architecture col="6" row="6">
		<!-- NORTH IOs (works) -->
		<pattern row-range="0 0" col-range="1 4">
			<block module="IO" />
		</pattern>

		<!-- EAST IOs (works) -->
		<pattern row-range="1 4" col-range="5 5">
			<block module="IO" />
		</pattern>

		<!-- SOUTH IOs -->
		<pattern row-range="5 5" col-range="1 4">
			<block module="IO" />
		</pattern>

		<!-- WEST IOs -->
		<pattern row-range="1 4" col-range="0 0">
			<block module="IO" />
		</pattern>

		<!-- BLOCKS -->
		<pattern row-range="1 4" col-range="1 4">
			<block module="block1" />
		</pattern>

		<!-- Wires -->
		<pattern row-range="0 0" col-range="1 4">
			<connection from="(rel 1 0).out" to="(rel 0 0).in" />
		</pattern>
		<pattern row-range="5 5" col-range="1 4">
			<connection from="(rel -1 0).out" to="(rel 0 0).in" />
		</pattern>
		<pattern row-range="1 4" col-range="0 0">
			<connection from="(rel 0 1).out" to="(rel 0 0).in" />
		</pattern>
		<pattern row-range="1 4" col-range="5 5">
			<connection from="(rel 0 -1).out" to="(rel 0 0).in" />
		</pattern>
		<pattern row-range="1 4" col-range="1 4">
			<connection from="(rel  1  0).out" to="(rel 0 0).in0" />
			<connection from="(rel  0 -1).out" to="(rel 0 0).in1" />
			<connection from="(rel  0  1).out" to="(rel 0 0).in2" />
			<connection from="(rel -1  0).out" to="(rel 0 0).in3" />
		</pattern>
	</architecture>
</cgra>
